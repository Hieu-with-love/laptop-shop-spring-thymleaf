<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product Detail</title>
    <div th:insert="~{common-user/head :: head}"></div>
</head>
<body class="sticky-header">

<!-- Start Header -->
<div th:insert="~{common-user/header-style-5::header}"></div>
<!-- End Header -->

<main class="main-wrapper">
    <!-- Start Shop Area  -->
    <div class="axil-single-product-area bg-color-white">
        <div class="single-product-thumb axil-section-gap pb--30 pb_sm--20">
            <div class="container">
                <div class="row row--50">
                    <div class="col-lg-6 mb--40">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="product-large-thumbnail-2 single-product-thumbnail axil-product slick-layout-wrapper--15 axil-slick-arrow arrow-both-side-3">
                                    <div class="thumbnail">
                                        <img th:src="@{'/uploads/' + ${product.thumbnail} }"
                                             alt="Product Images">
                                    </div>
                                    <div class="thumbnail" th:each="productImage : ${productImages}">
                                        <img th:src="@{'/uploads/'+${productImage.getImageUrl()}}" alt="Product Images">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="small-thumb-wrapper product-small-thumb-2 small-thumb-style-two small-thumb-style-three">
                                    <div class="small-thumb-img ">
                                        <img th:src="@{'/uploads/' + ${product.thumbnail} }"
                                             alt="samll-thumb">
                                    </div>
                                    <div class="small-thumb-img" th:each="productImage : ${productImages}">
                                        <img th:src="@{'/uploads/'+${productImage.getImageUrl()}}" alt="samll-thumb">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb--40">
                        <div class="single-product-content">
                            <div class="inner">
                                <h2 class="product-title" th:text="${product.name}"></h2>
                                <div class="price-amount price-offer-amount">
                                    <span class="price current-price" th:text="${product.price}"></span>
                                    <span class="price old-price" th:text="${product.oldPrice}"></span>
                                    <span class="offer-badge">20% OFF</span>
                                </div>
                                <div class="product-rating">
                                    <div class="star-rating">
                                        <!-- Define ratingCount to ensure it's a number -->
                                        <th:block th:with="ratingCount=${ratingCount}">
                                            <!-- Loop for filled stars -->
                                            <th:block th:if="${ratingCount > 0}">
                                                <th:block th:each="i : ${#numbers.sequence(1, ratingCount)}">
                                                    <i class="fas fa-star"></i>
                                                </th:block>
                                            </th:block>

                                            <!-- Loop for empty stars -->
                                            <th:block th:if="${ratingCount < 5}">
                                                <th:block th:each="i : ${#numbers.sequence(1, (5 - ratingCount))}">
                                                    <i class="far fa-star"></i>
                                                </th:block>
                                            </th:block>
                                        </th:block>
                                    </div>
                                    <div class="review-link">
                                        <a href="#">(<span th:text="${ratingUser}"></span> customer reviews)</a>
                                    </div>
                                </div>
                                <ul class="product-meta">
                                    <li th:if="${product.quantity > 0}">
                                        <i class="fal fa-check"></i>In stock
                                    </li>
                                    <li th:if="${product.quantity <= 0}">
                                        <i class="fal fa-underline"></i>Out of stock
                                    </li>
                                    <li><i class="fal fa-check"></i>Free delivery available</li>
                                    <li><i class="fal fa-check"></i>Sales 30% Off Use Code: MOTIVE30</li>
                                </ul>
                                <p class="description mb--40" th:text="${product.description}"></p>

                                <!-- Start Product Action Wrapper  -->
                                <div class="product-action-wrapper d-flex-center">

                                    <!-- Start Product Action  -->
                                    <ul class="product-action action-style-two d-flex-center mb--0">
                                        <li class="add-to-cart">
                                            <form th:action="@{/user/cart/add-to-cart}" method="post"
                                                  class="cart-action">
                                                <input type="hidden" name="cartId" th:value="${session.cartId}"/>
                                                <input type="hidden" name="productId" th:value="${productE.id}"/>
                                                <input type="hidden" name="quantity" value="1"/>
                                                <li class="select-option">
                                                    <button type="submit" class="add-to-cart-btn">Buy now
                                                    </button>
                                                </li>
                                            </form>
                                        </li>
                                        <li class="wishlist"><a href="#" class="axil-btn wishlist-btn"><i
                                                class="far fa-heart"></i></a></li>
                                    </ul>
                                    <!-- End Product Action  -->

                                </div>
                                <!-- End Product Action Wrapper  -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End .single-product-thumb -->
        <div class="woocommerce-tabs wc-tabs-wrapper bg-vista-white">
            <div class="container">
                <div class="product-desc-wrapper mb--30 mb_sm--10">
                    <h4 class="mb--60 desc-heading">Description</h4>
                    <div class="row mb--15">
                        <div class="col-lg-6 mb--30">
                            <div class="single-desc">
                                <h5 class="title">Specifications:</h5>
                                <p>Chúng tôi cung cấp những sản phẩm công nghệ mới nhất, giá rẻ hơn so với thị trường.
                                    Cung cấp nhiều ưu đãi cho khách hàng khi mua sản phẩm trên trang web của chúng tôi.
                                </p>
                            </div>
                        </div>
                        <!-- End .col-lg-6 -->
                        <div class="col-lg-6 mb--30">
                            <div class="single-desc">
                                <h5 class="title">Care & Maintenance:</h5>
                                <p>
                                    Chúng tôi có chính sách chăm sóc khách hàng và các quy trình hoàn trả hàng đầy đủ.
                                    Nếu có điều kiện sẽ làm thêm chatbot trả lời khách hàng 24/7.
                                </p>
                            </div>
                        </div>
                        <!-- End .col-lg-6 -->
                    </div>
                    <!-- End .row -->
                    <div class="row">
                        <div class="col-lg-12">
                            <ul class="pro-des-features">
                                <li class="single-features">
                                    <div class="icon">
                                        <img th:src="@{/etrade/assets/images/product/product-thumb/icon-3.png}"
                                             alt="icon">
                                    </div>
                                    Easy Returns
                                </li>
                                <li class="single-features">
                                    <div class="icon">
                                        <img th:src="@{/etrade/assets/images/product/product-thumb/icon-2.png}"
                                             alt="icon">
                                    </div>
                                    Quality Service
                                </li>
                                <li class="single-features">
                                    <div class="icon">
                                        <img th:src="@{/etrade/assets/images/product/product-thumb/icon-1.png}"
                                             alt="icon">
                                    </div>
                                    Original Product
                                </li>
                            </ul>
                            <!-- End .pro-des-features -->
                        </div>
                    </div>
                    <!-- End .row -->
                </div>
                <!-- End .product-desc-wrapper -->
                <div class="additional-info pb--40 pb_sm--20">
                    <h4 class="mb--60">Additional Information</h4>
                    <div class="product-additional-info">
                        <div class="table-responsive">
                            <table th:object="${productE}">
                                <tbody>
                                <tr>
                                    <th>Ram Memory</th>
                                    <td th:text="*{ram}"></td>
                                </tr>
                                <tr>
                                    <th>Battery Capacity</th>
                                    <td th:text="*{batteryCapacity}"></td>
                                </tr>
                                <tr>
                                    <th>Monitor</th>
                                    <td th:text="*{monitor}"></td>
                                </tr>
                                <tr>
                                    <th>Graphic Card</th>
                                    <td th:text="*{graphicCard}"></td>
                                </tr>
                                <tr>
                                    <th>Hard drive</th>
                                    <td th:text="*{hardDrive}"></td>
                                </tr>
                                <tr>
                                    <th>Screen Technology</th>
                                    <td th:text="*{screenTechnology}"></td>
                                </tr>
                                <tr>
                                    <th>Ports</th>
                                    <td th:text="*{ports}"></td>
                                </tr>
                                <tr>
                                    <th>CPU</th>
                                    <td th:text="*{cpu}"></td>
                                </tr>
                                <tr>
                                    <th>Quantity</th>
                                    <td th:text="*{quantity}"></td>
                                </tr>
                                <tr>
                                    <th>Brand</th>
                                    <td th:text="*{brand.name}"
                                        th:value="*{brand.id}">
                                        <a th:href="@{/user/brand/products}"></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Category</th>
                                    <td th:text="*{category.name}"
                                        th:value="*{category.id}">
                                        <a th:href="@{/user/category/products}"></a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- End .product-additional-info -->
                </div>

                <div class="reviews-wrapper">
                    <h4 class="mb--60">Reviews</h4>
                    <div class="row">
                        <div class="col-lg-6 mb--40">
                            <div class="axil-comment-area pro-desc-commnet-area">
                                <h5 class="title" th:text="${ratingUser} + ' Review for this product'"></h5>
                                <ul class="comment-list">
                                    <!-- Start Single Comment  -->
                                    <li class="comment" th:each="rating : ${ratings}">
                                        <div class="comment-body">
                                            <div class="single-comment">
                                                <div class="comment-img">
<!--                                                    <img th:src="@{'/uploads/'+${rating.getUser().getAvatar()()}}"-->
<!--                                                         alt="Author Images">-->
                                                </div>
                                                <div class="comment-inner">
                                                    <h6 class="commenter">
                                                        <a class="hover-flip-item-wrapper" href="#">
                                                                        <span class="hover-flip-item">
                                                                            <span data-text="Cameron Williamson"
                                                                                  th:text="${rating.getUser().getFullName()}"></span>
                                                                        </span>
                                                        </a>
                                                        <span class="commenter-rating ratiing-four-star">
                                                                    <!-- Define ratingCount to ensure it's a number -->
                                                                    <th:block th:with="star=${rating.getStar()}">
                                                                        <!-- Loop for filled stars -->
                                                                        <th:block th:if="${star > 0}">
                                                                            <th:block
                                                                                    th:each="i : ${#numbers.sequence(1, star)}">
                                                                                <i class="fas fa-star"></i>
                                                                            </th:block>
                                                                        </th:block>
                                                                        <!-- Loop for empty stars -->
                                                                        <th:block th:if="${star < 5}">
                                                                            <th:block
                                                                                    th:each="i : ${#numbers.sequence(1, (5 - star))}">
                                                                                <i class="far fa-star"></i>
                                                                            </th:block>
                                                                        </th:block>
                                                                    </th:block>
                                                                </span>
                                                    </h6>
                                                    <div class="comment-text">
                                                        <p th:text="${rating.getContent()}"></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <!-- End Single Comment  -->
                                </ul>
                            </div>
                            <!-- End .axil-commnet-area -->
                        </div>
                        <!-- End .col -->
                        <div class="col-lg-6 mb--40">
                            <!-- Start Comment Respond  -->
                            <div class="comment-respond pro-des-commend-respond mt--0">
                                <h5 class="title mb--30">Add a Review</h5>
                                <p>Your email address will not be published. Required fields are marked *</p>
                                <div class="rating-wrapper d-flex-center mb--40">
                                    Your Rating <span class="require">*</span>
                                    <div class="reating-inner ml--20">
                                        <a href="#"><i class="fal fa-star"></i></a>
                                        <a href="#"><i class="fal fa-star"></i></a>
                                        <a href="#"><i class="fal fa-star"></i></a>
                                        <a href="#"><i class="fal fa-star"></i></a>
                                        <a href="#"><i class="fal fa-star"></i></a>
                                    </div>
                                </div>

                                <form th:action="@{/user/products/reviews(productId=${productE.id})}" method="post" th:object="${rating}">
                                    <input type="hidden" name="ratingValue" id="ratingValue" th:field="*{star}"/>
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label>Other Notes (optional)</label>
                                                <textarea placeholder="Your Comment" th:field="*{content}"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-lg-12">
                                            <div class="form-submit">
                                                <button type="submit" id="submit"
                                                        class="axil-btn btn-bg-primary w-auto">Submit Comment
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- End Comment Respond  -->
                        </div>
                        <!-- End .col -->
                    </div>
                </div>
                <!-- End .reviews-wrapper -->
            </div>
        </div>
        <!-- woocommerce-tabs -->
    </div>
    <!-- End Shop Area  -->

    <!-- Start Recently Viewed Product Area  -->
    <div th:insert="~{common-user/content::viewed-product-area}"></div>
    <!-- End Recently Viewed Product Area  -->

</main>
<div class="service-area">
    <div class="container">
        <div class="row row-cols-xl-4 row-cols-sm-2 row-cols-1 row--20">
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/etrade/assets/images/icons/service1.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">Fast &amp; Secure Delivery</h6>
                        <p>Tell about your service.</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/etrade/assets/images/icons/service2.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">Money Back Guarantee</h6>
                        <p>Within 10 days.</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/etrade/assets/images/icons/service3.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">24 Hour Return Policy</h6>
                        <p>No question ask.</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="service-box service-style-2">
                    <div class="icon">
                        <img th:src="@{/etrade/assets/images/icons/service4.png}" alt="Service">
                    </div>
                    <div class="content">
                        <h6 class="title">Pro Quality Support</h6>
                        <p>24/7 Live support.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Start Footer Area  -->
<div th:insert="~{common-user/footer::footer}"></div>
<!-- End Footer Area  -->
<div th:insert="~{common-user/script::script}"></div>

</body>
</html>